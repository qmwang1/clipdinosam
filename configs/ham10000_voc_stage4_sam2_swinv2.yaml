stage: 4

model:
  backbone:
    type: swin
    name: swinv2_large_window12to24_192to384
    pretrained: true
    out_index: 3           # final-stage tokens (1536-dim)
    dynamic_img_size: true # allow timm SwinV2 to accept 224 crops
  clip:
    name: ViT-L-14
  sam:
    type: sam2_hiera_large
    config: checkpoints/sam2/sam2_hiera_large.yaml
    checkpoint: checkpoints/sam2/sam2_hiera_large.pt

data:
  format: voc
  root: /path/to/HAM10000_VOC
  split: train
  binary: true
  text: "skin lesion"
  resize: 256
  crop: 224
  num_workers: 4

optim:
  batch_size: 8
  lr: 2.0e-5
  lora_lr: 3.0e-4
  wd: 1.0e-4

loss:
  clip_align_weight: 0.1
  ssl_weight: 0.05

epochs: 150

lora:
  sam:
    enable: true
    rank: 8
    alpha: 8
    dropout: 0.0
    targets: ["attn", "mlp", "proj", "lin"]
  dino:
    enable: false
    last_k_blocks: 8
    rank: 16
    alpha: 16
    dropout: 0.0

output:
  dir: experiments/runB-stage4-150epochs

checkpoint:
  save_best: true
  save_latest: true
  keep_per_epoch: false
  best_metric: train_loss

eval:
  dual_circle:
    enable: false
    image_dir:
    circle_dir:
    output_dir:
